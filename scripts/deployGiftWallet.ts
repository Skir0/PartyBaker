import { Address, beginCell, Cell, toNano } from '@ton/core';
import { compile, NetworkProvider } from '@ton/blueprint';
import { GiftWallet, GiftWalletConfig, giftWalletConfigToCell } from '../wrappers/GiftWallet';

const ACCEPTED_MINTER_USDT_ADDRESS = Address.parse("EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs");
const ACCEPTED_MINTER_COOKIE_ADDRESS = Address.parse("kQBSn8MNUxBnYx2Yj5xjJh9Xk9UU9eqLs4gYPzIgnnkLQ1W_");

const USDT_WALLET_CODE = Cell.fromBase64(
    'te6ccgECGAEABbsAART/APSkE/S88sgLAQIBYgIDAgLLBAUCASAUFQLz0MtDTAwFxsI47MIAg1yHTHwGCEBeNRRm6kTDhgEDXIfoAMO1E0PoA+kD6QNTU0VBFoUE0yFAF+gJQA88WAc8WzMzJ7VTg+kD6QDH6ADH0AfoAMfoAATFw+DoC0x8BAdM/ARLtRND6APpA+kDU1NEmghBkK30HuuMCJoGBwAdojhkZYOA54tkgUGD+gvAAZY1NVFhxwXy4EkE+kAh+kQwwADy4U36ANTRINDTHwGCEBeNRRm68uBIgEDXIfoA+kAx+kAx+gAg1wsAmtdLwAEBwAGw8rGRMOJUQxsIA/qCEHvdl966juc2OAX6APpA+ChUEgpwVGAEExUDyMsDWPoCAc8WAc8WySHIywET9AAS9ADLAMn5AHB0yMsCygfL/8nQUAjHBfLgShKhRBRQZgPIUAX6AlADzxYBzxbMzMntVPpA0SDXCwHAALORW+MN4CaCECx2uXO64wI1JQoLDAGOIZFykXHi+DkgbpOBJCeRIOIhbpQxgShzkQHiUCOoE6BzgQOjcPg8oAJw+DYSoAFw+Dagc4EECYIQCWYBgHD4N6C88rAlWX8JAOyCEDuaygBw+wL4KEUEcFRgBBMVA8jLA1j6AgHPFgHPFskhyMsBE/QAEvQAywDJIPkAcHTIywLKB8v/ydDIgBgBywUBzxZY+gICmFh3UAPLa8zMlzABcVjLasziyYAR+wBQBaBDFMhQBfoCUAPPFgHPFszMye1UAETIgBABywUBzxZw+gJwActqghDVMnbbAcsfAQHLP8mAQvsAAfwUXwQyNAH6QNIAAQHRlcghzxbJkW3iyIAQAcsFUATPFnD6AnABy2qCENFzVAAByx9QBAHLPyP6RDDAAI41+ChEBHBUYAQTFQPIywNY+gIBzxYBzxbJIcjLARP0ABL0AMsAyfkAcHTIywLKB8v/ydASzxaXMWwScAHLAeL0AMkNBPiCEGUB81S6jiIxNDZRRccF8uBJAvpA0RA0AshQBfoCUAPPFgHPFszMye1U4CWCEPuI4Rm6jiEyNDYD0VExxwXy4EmLAlUSyFAF+gJQA88WAc8WzMzJ7VTgNCSCECNcr1K64wI3I4IQy4YpArrjAjZbIIIQJQjWarrjAmwxDg8QEQAIgFD7AALsMDEyUDPHBfLgSfpA+gDU0SDQ0x8BAYBA1yEhghAPin6luo5NNiCCEFlfB7y6jiwwBPoAMfpAMfQB0SD4OSBulDCBFp/ecYEC8nD4OAFw+DaggRp3cPg2oLzysI4TghDu0jbTupUE0wMx0ZQ08sBI4uLjDVADcBITAEQzUULHBfLgSchQA88WyRNEQMhQBfoCUAPPFgHPFszMye1UAB4wAscF8uBJ1NTRAe1U+wQAGIIQ03IVjLrchA/y8ADOMfoAMfpAMfpAMfQB+gAg1wsAmtdLwAEBwAGw8rGRMOJUQhYhkXKRceL4OSBuk4EkJ5Eg4iFulDGBKHORAeJQI6gToHOBA6Nw+DygAnD4NhKgAXD4NqBzgQQJghAJZgGAcPg3oLzysADAghA7msoAcPsC+ChFBHBUYAQTFQPIywNY+gIBzxYBzxbJIcjLARP0ABL0AMsAySD5AHB0yMsCygfL/8nQyIAYAcsFAc8WWPoCAphYd1ADy2vMzJcwAXFYy2rM4smAEfsAACW9mt9qJofQB9IH0gampoiBIvgkAgJxFhcAha289qJofQB9IH0gampoii+CfBQAuCowAgmKgeRlgax9AQDniwDni2SQ5GWAifoACXoAZYBk/IA4OmRlgWUD5f/k6EAAz68W9qJofQB9IH0gampov5noNsF4OHLr21FNnJfCg7fwrlF5Ap4rYRnDlGJxnk9G7Y90E+YseApBeHdAfpePAaQHEUEbGst3Opa92T+oO7XKhDUBPIxLOskfRYm0eAo4ZGWD+gBkoYBA',
);

const COOKIE_WALLET_CODE = Cell.fromBase64(
    'te6ccgECDwEAArkAART/APSkE/S88sgLAQIBYgIDAgLPBAUCA3pgDQ4C9z4kZLwAeAg1ywj3uy+9I5pMe1E0AHTP/oA+kj6UDAE+gAg1DHXTPiS+CjIz4QgFvpSFfpSyQHIz4TQzMz5FsjPigBAy//PUBPHBfLgSlMCvvLixFihyAH6As7J7VQhbpFb4MjPhQgS+lKCENUydtvPC47LP8mAQvsA4ImAGBwDfNMfMSDXScEgkTDgINcLH4IQF41FGb2RMODTHzEg10nBQJEw4NM/MSDXScEEkTDgINcLAyDCEJFb4CHXSQGqAqYEuZEw4PoAINdJwQKRW+DXCwHDAJEw4O1E0PoAUxK+kgKhk2whcOLIAfoCzsntVIAAILHa5cwH+1yeOczH4l/iTcPg6ggiYloCgvPLgS9M/+kjXCgCVIMj6UsmRbeJtIvpEMMAAjigw7UTQ1DHXTPgoyM+EIBT6UhP6UslYyM+E0MzM+RbIz4oAQMv/z1ABkTLi+JLIz4WI+lKCENFzVADPC44Tyz/6VPQAyYBA+wDg1ywgAAAArAgD/o53Me1E0PoAIPpI1DHXTPiSWMcF8uBJA9M/MfpI+gDXTCDQ1ywgvGoozPK/0z8x+gD6UDBu8uLEIMIA8uLEFaDIAfoCE87J7VT4KMjPhCAS+lL6UsnIz4mIAVMUyM+E0MzM+RbPC/9Y+gKBAI3PC3ATzBLMzMlx+wDgidcn4wIJCgsACAAAAAMAQjHtRND6APpI+JJYxwXy4EkC0z8x+kgwyFj6AvpSzsntVAFeidcnjiEx7UTQ+gD6SNQx+JIixwXy4EkD10zIUAP6AvpSzM7J7VTgMIQPAccA8vQMAAgAAAAEAFGtvPaiaGoY66Z8FGRnwhAJ/SkJfSlkgORnwmhmZnyLZGfFACBl/+eoQAAfrxb2omh9AH0kamumP6qQQA==',
);
export const CONFIG_ADMIN_ADDRESS = Address.parse("0QBnp25bT_Taj8juEslO0zaHDwLTyIGJq72SFurXwy2pJVh4");
export const DEPLOYED_CONTRACT_ADDRESS = Address.parse('kQAIhkQjIX9Q6oVt7rrewIeRJvVDmHg_a8nT_ladybHU1M_3');


export async function run(provider: NetworkProvider) {
    const config: GiftWalletConfig = {
        targetAmount: 500n * 1_000_000n,
        adminAddress: CONFIG_ADMIN_ADDRESS,
        acceptedMinterAddress: ACCEPTED_MINTER_COOKIE_ADDRESS,
        code: COOKIE_WALLET_CODE,
    };
    const giftWalletContract = provider.open(GiftWallet
        .createFromConfig(config, await compile('GiftWallet')));
    console.log(giftWalletContract.address);

    await giftWalletContract.sendDeploy(provider.sender(), toNano(0.3));

    await provider.waitForDeploy(giftWalletContract.address);
}
